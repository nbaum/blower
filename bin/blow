#!/usr/bin/env ruby
require 'blower'
require 'pathname'
require 'optparse'

OptionParser.new do |opts|
  opts.banner = "Usage: blow [options] task..."
  opts.on "-d DIR", "Change directory" do |v|
    Dir.chdir v
  end
end.order!

context = Blower::Context.new([".", Dir.pwd])
context.target = nil
context.run "Blowfile"
ARGV.each do |arg|
  context.run arg
end
